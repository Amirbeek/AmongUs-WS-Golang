:root {
    --bg:#0b0f1a;
    --bg-2:#0f1526;
    --panel:#141b2e;
    --muted:#6b7280;
    --text:#e6e9f2;
    --accent:#5eead4;
    --danger:#ef4444;
    --warn:#f59e0b;
    --ok:#22c55e;
    --shadow:0 10px 30px rgba(0,0,0,.35);
    --rounded:22px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    background:radial-gradient(1200px 800px at 10% 10%, #12182b 0%, var(--bg) 40%) ,
    radial-gradient(800px 600px at 90% 10%, #111827 0%, var(--bg) 50%);
    color:var(--text);
    font-family:'Nunito',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
    letter-spacing:.2px;
}
.stars{position:fixed;inset:0;pointer-events:none;opacity:.05;
    background-image:radial-gradient(#ffffff 1px, transparent 1px);
    background-size:3px 3px;
    mask-image:radial-gradient(circle at center, rgba(0,0,0,.35), rgba(0,0,0,1) 60%);
}

/* Landing */
.landing{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:24px;background:rgba(6,10,20,.75);backdrop-filter:blur(10px);}
.card{width:100%;max-width:560px;background:linear-gradient(180deg, #121a33 0%, var(--panel) 100%);border:1px solid #1f2742;border-radius:var(--rounded);box-shadow:var(--shadow);padding:28px}
.card h1{margin:0 0 6px 0;font-weight:900;letter-spacing:.5px}
.subtitle{margin:0 0 22px 0;color:#aab1c6}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
.stack{display:grid;gap:10px}
.row{display:flex;gap:10px}

.select, .input, .btn{border-radius:14px}
.select, .input{background:#0e1427;border:1px solid #253056;color:var(--text);padding:14px 16px;font-size:16px;outline:none}
.btn{appearance:none;border:none;cursor:pointer;background:linear-gradient(180deg,#37e0c1,#0fb9a9);color:#081222;font-weight:900;padding:14px 18px;box-shadow:0 6px 18px rgba(16,185,129,.25);transition:transform .05s ease}
.btn:active{transform:translateY(1px)}
.btn:disabled{filter:grayscale(.6);opacity:.7;cursor:not-allowed}

.panel.main {
    display: grid;
    grid-template-rows: auto 1fr auto;  /* topbar, chat, composer */
    height: 100%;                       /* fills its grid cell */
    min-height: 0;                      /* allow shrinking for scroll */
}

.hint{margin-top:10px;color:#9aa1b7;font-size:13px}

/* App Layout */
.app{
    display:grid;
    height:100vh;
    padding:18px;
    gap:18px;
    grid-template-columns:280px 1fr;
    min-height: 0;                      /* NEW: ensures proper grid shrink */
}
.app.visible{display:grid}

.panel{
    background:linear-gradient(180deg,#121a33,#0f1526 80%);
    border:1px solid #1e2441;
    border-radius:var(--rounded);
    box-shadow:var(--shadow);
    min-height: 0;                      /* NEW: allows children scroll */
}

/* Sidebar */
.sidebar{padding:16px;display:flex;flex-direction:column;gap:12px}
.room-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.badge{padding:6px 10px;border-radius:999px;font-size:12px;font-weight:800;letter-spacing:.6px;text-transform:uppercase}
.badge.role{display:inline-flex;align-items:center;gap:8px}
.badge.killer{background:rgba(239,68,68,.15);color:#fecaca;border:1px solid rgba(239,68,68,.4);box-shadow:0 0 12px rgba(239,68,68,.25) inset}
.badge.crew{background:rgba(94,234,212,.1);color:#d1faf5;border:1px solid rgba(94,234,212,.35)}

.players{display:flex;flex-direction:column;gap:8px;max-height:calc(100vh - 220px);overflow:auto;padding-right:4px}
.player{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid #222a48;background:#0d1428;border-radius:14px}
.avatar{width:28px;height:28px;border-radius:999px;background:#1f2a44;border:2px solid #33406a;position:relative}
.avatar::after{content:"";position:absolute;inset:-4px;border-radius:999px;box-shadow:0 0 12px rgba(88,101,242,.35)}
.pname{font-weight:800}
.status{margin-left:auto;font-size:12px;color:#9aa1b7}

.action{margin-top:12px;display:grid;gap:10px}
.select-sm{background:#0e1427;border:1px solid #253056;color:var(--text);padding:12px 14px;border-radius:12px}
.btn.full{width:100%}

/* Main */
.main{display:grid;grid-template-rows:auto 1fr auto;min-height:0;} /* ensure shrink */
.topbar{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #1e2441}
.title{display:flex;align-items:center;gap:12px}
.title h2{margin:0}
.dev{display:flex;align-items:center;gap:8px}
.dev select{background:#0e1427;border:1px solid #253056;color:var(--text);padding:10px;border-radius:10px}

.chat{
    padding:16px;
    overflow-y:auto;
    overflow-x:hidden;
    scroll-behavior:smooth;
    min-height:0;          /* NEW: critical for scroll */
}
.msg{display:flex;gap:10px;margin-bottom:12px}
.bubble{max-width:70%;padding:12px 14px;border-radius:16px;border:1px solid #253056;background:#0e1427}
.bubble.self{background:linear-gradient(180deg,#0fb9a9 0%, #0a837b 100%);color:#001312;border-color:transparent}
.meta{font-size:12px;color:#9aa1b7;margin-bottom:4px}

.composer{display:flex;gap:10px;padding:14px;border-top:1px solid #1e2441}
.composer input{flex:1;background:#0e1427;border:1px solid #253056;color:var(--text);padding:12px 14px;border-radius:12px;outline:none}

/* Killer Accent */
.killer-accent{outline:2px solid rgba(239,68,68,.35); box-shadow:0 0 0 4px rgba(239,68,68,.15) inset}
.killer-glow{box-shadow:0 0 28px rgba(239,68,68,.25)}

/* Utility */
.hidden{display:none}

/* Scrollbar styling */
.chat::-webkit-scrollbar {width:8px;}
.chat::-webkit-scrollbar-thumb {background:#253056;border-radius:4px;}
.chat::-webkit-scrollbar-track {background:transparent;}
